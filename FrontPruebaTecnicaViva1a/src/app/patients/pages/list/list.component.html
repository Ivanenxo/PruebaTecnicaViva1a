<div class="card p-4 w-full">

  <!-- Encabezado -->
  <div class="header-actions">
    <h2>Pacientes</h2>
    <button pButton
            label="Crear Paciente"
            routerLink="/patients/create"
            class="p-button-success p-button-sm">
    </button>

  </div>

  <!-- Filtros -->
  <div class="filters-container">
    <input pInputText
           placeholder="Filtrar por nombre"
           name="firstName"
           [(ngModel)]="filterName"
           class="p-inputtext-sm" />

    <input pInputText
           placeholder="Filtrar por documento"
           name="documentNumber"
           [(ngModel)]="filterDocument"
           class="p-inputtext-sm" />

    <button pButton
            label="Buscar"
            (click)="search()"
            class="p-button-primary p-button-sm">
    </button>

    <button pButton
            label="Limpiar"
            (click)="limpiar()"
            class="p-button-secondary p-button-sm">
    </button>
  </div>

  <!-- Tabla -->
  <p-table #dt [value]="patients" [paginator]="true" [rows]="5" [rowsPerPageOptions]="[5,10,20,100]"  [loading]="loading" class="p-datatable-sm">

    <ng-template pTemplate="header">
      <tr>
        <th>Documento</th>
        <th>Nombre</th>
        <th>Fecha Nacimiento</th>
        <th>Teléfono</th>
        <th>Email</th>
        <th>Fecha de Creacion</th>
        <th>Acciones</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-p>
      <tr>
        <td>{{ p.documentType }} {{ p.documentNumber }}</td>
        <td>{{ p.firstName }} {{ p.lastName }}</td>
        <td>{{ p.birthDate }}</td>
        <td>{{ p.phoneNumber }}</td>
        <td>{{ p.email }}</td>
        <td>{{ p.createdAt }}</td>
        <td>
          <!-- Botón editar -->
          <button pButton icon="pi pi-pencil"
                  class="p-button-rounded p-button-info p-button-sm"
                  (click)="editPatient(p)">
          </button>

          <!-- Botón eliminar -->
          <button pButton icon="pi pi-trash"
                  class="p-button-rounded p-button-danger p-button-sm ml-2"
                  (click)="deletePatient(p)">
          </button>

          <button pButton icon="pi pi-search"
          class="p-button-rounded p-button-help p-button-sm"
          (click)="viewPatientDetails(p)">
          </button>
        </td>
      </tr>
    </ng-template>

  </p-table>

  <button pButton
          label="Exportar Excel"
          icon="pi pi-file-excel"
          class="p-button-warning p-button-sm ml-2"
          (click)="exportExcel()">
    </button>

</div>
